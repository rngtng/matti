<!DOCTYPE html>
<html>
  <head>
    <title>Matti's Supermarkt</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="" name="keywords" />
    <meta content="" name="description" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <style type="text/css">
      body {
        color: #000000;
        background-color: #FFFFFF;
        margin: 0;
      }

      img {
        display: block;
      }

      a {
        border: 0;
      }

      #main {
        padding-top: -40px;
        width: 841px;
        margin: 0 auto;
      }

      #TODO {
        background-image: url(images/rechts_buttons.png);
        background-repeat: no-repeat;
        background-position: 0 376px;
      }

      #facebook {
        margin-top: 5px;
        width: 30px;
        height: 30px;
        display: block;
      }

      #footer a {
        color: #000;
        margin: 4px 15px;
      }
    </style>
    <script>
      var maxCartoons = 95,
      appID = "142898152440446",

      randomCartoonNr = function(currentCartoonNr) {
        var nr = randomNr(maxCartoons);
        if (nr == currentCartoonNr) {
          return randomCartoonNr(nr);
        }
        return nr;
      },

      randomNr = function(max) {
        return Math.round(Math.random() * max) + 1;
      },

      cartoonUrl = function(nr) {
        return "cartoons/msm_cartoon_" + fillUpZeros(nr, 4) + ".jpg";
      },

      loadCartoon = function(nr) {
        $(".next").attr("href", "?cartoon=" + randomCartoonNr(nr));
        $("#cartoon").attr("src", cartoonUrl(nr));
      },

      fillUpZeros = function pad(number, length) {
        var str = '' + number;
        while (str.length < length) {
          str = '0' + str;
        }
        return str;
      },

      cartoonNr = randomCartoonNr();

      if (url = decodeURI(window.location.href).match(/cartoon=(\d+)/)) {
        var possibleCartoonNr = parseInt(url[1]);
        if (possibleCartoonNr > 0 && possibleCartoonNr <= maxCartoons) {
          cartoonNr = possibleCartoonNr;
        }
      };

      $("#facebook").live("click", function(event) {
        var params = {
          app_id:       appID,
          link:         "http://rngtng.github.com/matti/?cartoon=" + cartoonNr,
          picture:      "http://rngtng.github.com/matti/" + cartoonUrl(cartoonNr),
          name:         "Matti's Supermarkt",
          caption:      "Cartoons vom WÃ¼hltisch des Lebens:",
          description:  "http://www.mattis-supermarkt.de",
          redirect_uri: "http://faceorama.warteschlange.de",
        };
        $(this).attr("href", function(index, url) {
          return url + "?" + $.param(params);
        });
      });

      $(document).ready(function(){
        loadCartoon(cartoonNr);
      });
    </script>
  </head>
  <body alink="#EE0000" link="#0000EE" vlink="#551A8B">
    <div id="main">
      <table border="0" cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="3" valign="bottom" width="841" height="218" background="images/header.jpg">
              <a href="#">
                <img width="841" height="218" src="images/blank.gif" border="0">
              </a>
            </td>
          </tr>
          <tr>
            <td valign="top" align="right" width="154" height="376" background="images/left.jpg">
              <a class="next" href="#"><img width="154" height="376" src="images/blank.gif" border="0"></a>
            </td>
            <td id="cartoon-fame" valign="top" width="530" height="376">
              <img id="cartoon" width="530" height="376" src="images/loading.gif">
            </td>
            <td valign="top" align="left" width="157" height="376" background="images/right.jpg">
              <a id="facebook" href="https://www.facebook.com/dialog/feed" target="_blank">
                <img width="157" height="376" src="images/blank.gif" border="0">
              </a>
            </td>
          </tr>
          <tr>
            <td colspan="3" valign="top" width="841" height="43" background="images/footer.jpg">
              <a href="/"><img width="841" height="43" src="images/blank.gif" border="0"></a>
            </td>
          </tr>
          <tr>
            <td id="footer" colspan="3" align="center">
              <small>
                <a class="next" href="#">zuf&auml;lliger Cartoon</a>
                <a href="#">Impressum</a>
                <a href="#">eMail</a>
              </small>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
